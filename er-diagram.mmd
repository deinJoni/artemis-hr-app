erDiagram
  TENANTS ||--o{ MEMBERSHIPS : "id=tenant_id"
  AUTH_USERS ||--o{ MEMBERSHIPS : "id=user_id"
  MEMBERSHIPS }o--|| ROLE_PERMISSIONS : "role"
  ROLE_PERMISSIONS }o--|| PERMISSIONS : "permission_key"

  TENANTS ||--o{ EMPLOYEES : ""
  AUTH_USERS ||--o{ EMPLOYEES : "user_id"
  EMPLOYEES ||--o{ EMPLOYEES : "manager_id"
  EMPLOYEES }o--o{ EMPLOYEE_CUSTOM_FIELD_DEFS : "(tenant scope)"
  EMPLOYEES ||--o{ EMPLOYEE_DOCUMENTS : ""
  EMPLOYEES ||--o{ EMPLOYEE_STATUS_HISTORY : ""
  EMPLOYEES ||--o{ EMPLOYEE_AUDIT_LOG : ""
  EMPLOYEES ||--o{ TEAM_MEMBERS : ""
  TEAMS ||--o{ TEAM_MEMBERS : ""
  TEAMS }o--|| DEPARTMENTS : "department_id"
  DEPARTMENTS ||--o{ EMPLOYEES : "department_id"
  OFFICE_LOCATIONS ||--o{ EMPLOYEES : "office_location_id"

  EMPLOYEES ||--o{ GOALS : ""
  GOALS ||--o{ GOAL_KEY_RESULTS : ""
  GOALS ||--o{ GOAL_UPDATES : ""
  AUTH_USERS ||--o{ GOALS : "created_by / updated_by"

  WORKFLOWS ||--o{ WORKFLOW_VERSIONS : ""
  WORKFLOW_VERSIONS ||--o{ WORKFLOW_NODES : ""
  WORKFLOW_VERSIONS ||--o{ WORKFLOW_EDGES : ""
  WORKFLOWS ||--o{ WORKFLOW_RUNS : ""
  WORKFLOW_RUNS ||--o{ WORKFLOW_RUN_STEPS : ""
  WORKFLOW_RUNS ||--o{ WORKFLOW_EVENTS : ""
  WORKFLOW_RUNS ||--|| EMPLOYEES : "employee_id"
  WORKFLOW_RUNS ||--|| WORKFLOW_VERSIONS : "version_id"

  AUTH_USERS ||--o{ TIME_ENTRIES : "user_id"
  TIME_ENTRIES ||--o{ TIME_ENTRY_AUDIT : ""
  AUTH_USERS ||--o{ OVERTIME_REQUESTS : "user_id"
  AUTH_USERS ||--o{ OVERTIME_REQUESTS : "approver_user_id"
  AUTH_USERS ||--o{ OVERTIME_BALANCES : "user_id"
  TIME_OFF_REQUESTS ||--o{ LEAVE_REQUEST_AUDIT : "request_id"
  EMPLOYEES ||--o{ LEAVE_BALANCES : "employee_id"
  LEAVE_TYPES ||--o{ LEAVE_BALANCES : ""
  LEAVE_TYPES ||--o{ TIME_OFF_REQUESTS : "leave_type_id"
  EMPLOYEES ||--o{ TIME_OFF_REQUESTS : "user_id via auth.users"
  HOLIDAY_CALENDARS }o--|| TENANTS : ""
  BLACKOUT_PERIODS }o--|| TENANTS : ""

  JOBS ||--o{ JOB_POSTINGS : ""
  JOBS ||--o{ APPLICATIONS : ""
  APPLICATIONS ||--o{ INTERVIEWS : ""
  INTERVIEWS ||--o{ EVALUATIONS : ""
  CANDIDATES ||--o{ APPLICATIONS : ""
  CANDIDATES ||--o{ COMMUNICATIONS : ""
  CANDIDATES ||--o{ TALENT_POOL : ""
  JOBS }o--|| DEPARTMENTS : "department_id"
  JOBS }o--|| OFFICE_LOCATIONS : "location_id"

  EQUIPMENT_ITEMS }o--|| EMPLOYEES : "employee_id"
  ACCESS_GRANTS ||--|| EMPLOYEES : "employee_id"
  EXIT_INTERVIEWS ||--|| EMPLOYEES : "employee_id"

  CONVERSATIONS ||--o{ MESSAGES : ""
  AUTH_USERS ||--o{ CONVERSATIONS : "created_by"
